<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>미국 시가총액 상위 260위 추적기</title>
  <link rel="stylesheet" href="/static/style.css" />
  <script src="/static/vendor/echarts-5.5.1.min.js"></script>
</head>
<body>
  <div class="container">
    <header>
      <div>
        <div class="badge">시가총액 · 미국</div>
        <h1>상위 260위 흐름 모니터</h1>
        <div class="stat-row">
          <span>최근 갱신일: <strong id="as-of">—</strong></span>
          <span id="latest-tag" class="latest-tag"></span>
        </div>
      </div>
      <button id="refresh">데이터 새로고침</button>
    </header>

    <div class="card controls-card">
      <div class="chart-header">
        <h2>화면 설정</h2>
        <small>기준일은 최신 데이터(최근 갱신일)로 고정됩니다</small>
      </div>
      <div class="control-tools">
        <label class="control-field">
          <span>차트 표시 범위</span>
          <select id="chart-rank-cap">
            <option value="25">상위 25</option>
            <option value="50">상위 50</option>
            <option value="100">상위 100</option>
            <option value="150">상위 150</option>
            <option value="200">상위 200</option>
            <option value="260" selected>상위 260</option>
          </select>
        </label>
        <label class="control-field control-search">
          <span>종목 빠른 검색</span>
          <div class="inline-tools">
            <input id="symbol-input" type="text" placeholder="예: NVDA" />
            <button id="focus-symbol" type="button" class="btn-compact">이동</button>
          </div>
        </label>
      </div>
      <div class="stat-row controls-stats">
        <span>기준 날짜: <strong id="selected-date">—</strong></span>
        <span>상위 260위 시총 합계: <strong id="top-total">—</strong></span>
      </div>
    </div>

    <div class="card flow-card flow-main">
      <div class="chart-header">
        <h2>상위 260위 순위 흐름</h2>
        <div class="legend"><span class="legend-dot legend-dot-accent"></span><span id="flow-selected">선을 클릭하거나 심볼을 입력해 종목 고정</span></div>
      </div>
      <div class="chart-wrap">
        <div id="flow-chart" class="chart-canvas"></div>
      </div>
    </div>

    <div class="grid">
      <div class="card">
        <div class="chart-header">
          <h2>상위 260위 일일 현황</h2>
          <div class="legend"><span class="legend-dot"></span><span>행 클릭: 종목 상세 보기</span></div>
        </div>
        <div class="table-wrap">
          <table>
            <thead>
              <tr>
                <th>#</th><th>종목</th><th>시가총액</th>
              </tr>
            </thead>
            <tbody id="table-body"></tbody>
          </table>
        </div>
      </div>

      <div class="card">
        <div class="chart-header">
          <h2>선택 종목 상세 추세</h2>
          <div class="legend"><span class="legend-dot legend-dot-accent-2"></span><span id="detail-selected">종목을 선택하세요</span></div>
        </div>
        <div class="chart-wrap">
          <div id="detail-chart" class="chart-canvas"></div>
        </div>
      </div>
    </div>

    <div class="card events-card">
      <div class="chart-header events-header">
        <h2>이벤트</h2>
        <div class="inline-tools event-tools">
          <label class="control-field">
            <span>기간</span>
            <select id="event-days">
              <option value="30">최근 30일</option>
              <option value="90">최근 90일</option>
              <option value="365" selected>최근 1년</option>
              <option value="all">전체</option>
            </select>
          </label>
          <label class="control-field">
            <span>표시 개수</span>
            <select id="event-max-items">
              <option value="30">30건</option>
              <option value="50">50건</option>
              <option value="100">100건</option>
              <option value="200">200건</option>
              <option value="260" selected>260건</option>
            </select>
          </label>
        </div>
      </div>
      <div class="grid grid-events">
        <div>
          <h2>신규 진입</h2>
          <small>상위 260위 안으로 새롭게 들어온 종목</small>
          <div class="list event-list event-list-block" id="entrants"></div>
        </div>
        <div>
          <h2>급상승 종목</h2>
          <small>하루에 5계단 이상 순위 상승한 종목</small>
          <div class="list event-list event-list-block" id="movers"></div>
        </div>
      </div>
    </div>
  </div>
  <script src="/static/app.js"></script>
</body>
</html>
